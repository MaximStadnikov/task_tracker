<%= link_to "Project", @project %>

<h1>Tasks</h1>

<table>
  <thead>
  <tr>
    <th><%= link_to "Title", :sort => params[:sort].eql?("title asc") ?
                                        "title desc" : "title asc"%></th>
    <th>Description</th>
    <th><%= link_to "Requested at",
                    :sort => params[:sort].eql?("created_at desc") ?
                               "created_at asc" : "created_at desc"%></th>
    <th><%= link_to "Deadline until",
                    :sort => params[:sort].eql?("deadline_at desc") ?
                               "deadline_at asc" : "deadline_at desc"%></th>
    <th>Project ID</th>
    <th colspan="3"></th>
  </tr>
  </thead>

  <tbody>
  <% @tasks.each do |task| %>
    <tr>
      <td><%= task.title %></td>
      <td><%= task.description %></td>
      <td><%= time_ago_in_words(task.created_at) %> ago</td>
      <td><%= task.deadline_at %></td>
      <td><%= task.project.name %></td>
      <td><%= link_to 'Show', url_for([@project, task]) %></td>
      <td><%= link_to 'Edit', edit_project_task_path(@project, task) %></td>
      <td><%= link_to 'Destroy', url_for([@project, task]), method: :delete, data: { confirm: 'Are you sure?' } %></td>
    </tr>
  <% end %>
  </tbody>
</table>

<%= paginate @tasks %>

<br>

<%= link_to 'New task', new_project_task_path(@project) %>
