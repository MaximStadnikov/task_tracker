<%= link_to "Project", @project %>

<h1>Tasks</h1>

<table>
  <thead>
  <tr>
    <th><%= link_to "Title",
                    :sort => params[:sort] != "title asc" ? "title asc" : "title desc" %></th>
    <th>Description</th>
    <th><%= link_to "Requested at",
                    :sort => params[:sort] != "created_at asc" ? "created_at asc" : "created_at desc"  %></th>
    <th><%= link_to "Deadline until",
                    :sort => params[:sort] != "deadline_at asc" ? "deadline_at asc" : "deadline_at desc"  %></th>
    <th>Project ID</th>
    <th colspan="5"></th>
  </tr>
  </thead>

  <tbody>
  <% @tasks.each do |task| %>
    <tr>
      <td><%= task.title %></td>
      <td><%= task.description %></td>
      <td><%= task.created_at %></td>
      <td><%= task.deadline_at %></td>
      <td><%= task.project.name %></td>
      <td><%= link_to 'Show', url_for([@project, task]) %></td>
      <td><%= link_to 'Edit', edit_project_task_path(@project, task) %></td>
      <td><%= link_to 'Destroy', url_for([@project, task]), method: :delete, data: { confirm: 'Are you sure?' } %></td>
    </tr>
  <% end %>
  </tbody>
</table>

<%= paginate @tasks, window: 2 %>
<br>

<%= link_to 'New task', new_project_task_path(@project) %>
